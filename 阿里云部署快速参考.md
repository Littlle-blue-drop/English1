# ğŸš€ é˜¿é‡Œäº‘éƒ¨ç½²å¿«é€Ÿå‚è€ƒ

## ä¸€ã€æœåŠ¡å™¨å‡†å¤‡ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰

```bash
# 1. è¿æ¥æœåŠ¡å™¨
ssh root@your-server-ip

# 2. å®‰è£…Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# 3. å®‰è£…PM2
npm install -g pm2

# 4. å®‰è£…Nginx
apt install -y nginx

# 5. é…ç½®é˜²ç«å¢™
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable
```

## äºŒã€éƒ¨ç½²åº”ç”¨

```bash
# 1. åˆ›å»ºç›®å½•
mkdir -p /var/www/voice-evaluation
cd /var/www/voice-evaluation

# 2. ä¸Šä¼ ä»£ç ï¼ˆä½¿ç”¨Gitæˆ–SCPï¼‰
git clone https://github.com/YOUR_USERNAME/YOUR_REPO.git .

# 3. å®‰è£…ä¾èµ–
npm ci --production=false

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp env.production.example .env.production
nano .env.production  # å¡«å…¥å®é™…å€¼

# 5. æ„å»ºåº”ç”¨
npm run build

# 6. å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js
pm2 save
pm2 startup  # æŒ‰æç¤ºæ‰§è¡Œè¾“å‡ºå‘½ä»¤
```

## ä¸‰ã€é…ç½®Nginx

```bash
# 1. å¤åˆ¶é…ç½®æ–‡ä»¶
cp nginx.conf /etc/nginx/sites-available/voice-evaluation

# 2. ç¼–è¾‘é…ç½®ï¼ˆä¿®æ”¹åŸŸåå’ŒSSLè¯ä¹¦è·¯å¾„ï¼‰
nano /etc/nginx/sites-available/voice-evaluation

# 3. å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/voice-evaluation /etc/nginx/sites-enabled/

# 4. æµ‹è¯•é…ç½®
nginx -t

# 5. é‡æ–°åŠ è½½
systemctl reload nginx
```

## å››ã€é…ç½®SSLï¼ˆLet's Encryptï¼‰

```bash
# å®‰è£…Certbot
apt install -y certbot python3-certbot-nginx

# è·å–è¯ä¹¦
certbot --nginx -d your-domain.com -d www.your-domain.com

# æµ‹è¯•è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

## äº”ã€å¸¸ç”¨å‘½ä»¤

### PM2ç®¡ç†
```bash
pm2 status                    # æŸ¥çœ‹çŠ¶æ€
pm2 logs voice-evaluation-app # æŸ¥çœ‹æ—¥å¿—
pm2 restart voice-evaluation-app # é‡å¯
pm2 stop voice-evaluation-app   # åœæ­¢
pm2 monit                      # ç›‘æ§
```

### åº”ç”¨æ›´æ–°
```bash
cd /var/www/voice-evaluation
git pull                      # æ‹‰å–ä»£ç 
npm ci --production=false     # å®‰è£…ä¾èµ–
npm run build                 # æ„å»º
pm2 restart voice-evaluation-app # é‡å¯
```

### Nginxç®¡ç†
```bash
systemctl reload nginx        # é‡æ–°åŠ è½½é…ç½®
systemctl restart nginx       # é‡å¯
nginx -t                      # æµ‹è¯•é…ç½®
tail -f /var/log/nginx/voice-evaluation-error.log # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```

## å…­ã€ç¯å¢ƒå˜é‡æ¸…å•

ç¡®ä¿ `.env.production` åŒ…å«ï¼š

```env
NEXT_PUBLIC_XFYUN_APP_ID=xxx
NEXT_PUBLIC_XFYUN_API_KEY=xxx
NEXT_PUBLIC_XFYUN_API_SECRET=xxx
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
JWT_SECRET=xxxï¼ˆå¼ºéšæœºå­—ç¬¦ä¸²ï¼‰
NODE_ENV=production
PORT=3000
HOSTNAME=0.0.0.0
```

## ä¸ƒã€æ•…éšœæ’æŸ¥

### 502é”™è¯¯
```bash
pm2 status                    # æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
pm2 logs                      # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
nginx -t                      # æ£€æŸ¥Nginxé…ç½®
```

### ç«¯å£å ç”¨
```bash
netstat -tulpn | grep 3000    # æ£€æŸ¥ç«¯å£
lsof -i :3000                 # æŸ¥çœ‹å ç”¨è¿›ç¨‹
```

### ç¯å¢ƒå˜é‡é—®é¢˜
```bash
cat .env.production           # æ£€æŸ¥ç¯å¢ƒå˜é‡
pm2 restart voice-evaluation-app # é‡å¯åº”ç”¨
```

## å…«ã€åŸŸåDNSé…ç½®

åœ¨åŸŸåDNSç®¡ç†é¢æ¿æ·»åŠ ï¼š

```
ç±»å‹: A
ä¸»æœºè®°å½•: @
è®°å½•å€¼: æœåŠ¡å™¨å…¬ç½‘IP
TTL: 600

ç±»å‹: A
ä¸»æœºè®°å½•: www
è®°å½•å€¼: æœåŠ¡å™¨å…¬ç½‘IP
TTL: 600
```

---

**è¯¦ç»†æ–‡æ¡£ï¼š** æŸ¥çœ‹ `é˜¿é‡Œäº‘éƒ¨ç½²æŒ‡å—.md`

